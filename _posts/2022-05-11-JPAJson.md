---
layout: post
read_time: true
show_date: true
title: "Spring-boot data JPA(三)JPA的序列化与反序列化"
date: 2022-05-10
tags: [Spring-boot, JPA, Json]
category: opinion
author: 荆凉凉
img: posts/20220510/title.png
description: "JPA只是一个简化对象关系映射来管理Java应用程序中的关系数据的规范。 它提供了一个平台，可以直接使用对象而不是使用SQL语句。"
---
springBoot整合了json转化插件Jackson，配合这一插件可以完成Json的序列化与反序列化。
定义一个类

```java
    @Data
    @NoArgsConstructor
    public Class Message{
        private String name;
        private String sex;
    }
```

在一个Controller中，可以以Message作为接收参数和返回内容：

```java
    public Message messageResponse(@RequestBody message){
      return message;
    }

```

如在以上的例子中，springBoot会将发送的json字符串中的name保存到Message的name属性中，并把sex保存到message的sex属性中（没有则保存空值）.
了解了以上就能解决对象序列化与反序列化过程中遇到的大部分问题，仍然有几点值得强调：

#### 一. 适当的忽略

在一对多关系中，以我们在[Spring-boot data JPA(一)建库与一对多、多对多关系 - 荆凉凉 (stpjing.github.io)](https://stpjing.github.io/JPAUnits.html)中创建的User与Admin类为例，User序列化时会序列化该User指向的Admin，同时Admin会序列化所有的下辖User对象，陷入无限迭代。

万幸Jackson提供了以下一对注解：@JsonBackReference, @JsonManagedReference

通常，Admin与User有明显的父子关系，Admin是“父”，User是“子”。

@JsonBackReference用于“子”的一方，被该字段标注的属性不会被序列化。

@JsonManagedReference用于“父”的一方，其意义在于序列化时的自动注入。
